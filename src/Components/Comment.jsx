import { doc, getDoc, updateDoc } from 'firebase/firestore'
import { useEffect, useState } from 'react'
import { useParams } from 'react-router-dom'
import { db } from '../firebase'
import './comment.css'
import { CopyToClipboard } from 'react-copy-to-clipboard';

const Comment = ({darkMode})=>{

    const { id } = useParams();
    const [websiteBlog, setWebsiteBlog] = useState({})

    useEffect(()=>{

        const docRef = doc(db, 'websiteBlog', id)
        getDoc(docRef)
        .then((doc)=>{
            setWebsiteBlog({...doc.data(), id: doc.id})

        })

    }, [])
    const { clap} = websiteBlog

    const pageLink = window.location.href
    const [copied, setCopied] = useState(false)
    useEffect(()=>{
        setTimeout(()=>{
            setCopied(false)
        },[5000])
    },[copied])

    const SubmitComment = (e)=>{
        e.preventDefault()
        alert('comment collected')
    }

    return(
        <div className="comment">

            <div className="create-blogpost1">
                <button className="creat">Create blog post</button>
                <button className="liste">Listen to Podcast</button>
            </div>

            <form action="" onSubmit={SubmitComment}>
                <div>
                    <input style={{border: '1px solid rgba(104, 113, 121, 0.65)'}} type="text" name="" id="comment-name" placeholder="Name"/>
                </div>
                <div style={{display: 'flex'}}>
                    <textarea style={{border: '1px solid rgba(104, 113, 121, 0.65)'}} className='text-area' cols="30" rows="10" placeholder="Leave a comment"></textarea>
                    <p className='submit-button'>Submit</p>
                </div>
                
            </form>

            <div className='clap-container' style={{paddingTop: '25px', display: 'flex', gap: '3px', justifyContent: 'start'}} >
                <div className={darkMode ? 'svg-icon-dark' : 'svg-icon'}>
                    <svg  style={{cursor: 'pointer'}} stroke={darkMode && 'white'} onClick={()=> updateDoc(doc(db, 'websiteBlog', id), { clap: clap + 1} )} xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 40 41" fill="none">
                    <g clip-path="url(#clip0_808_368)">
                    <path d="M19.6663 7.35665L18.9381 5.62885C18.8898 5.51429 18.889 5.38524 18.9359 5.27009C18.9827 5.15494 19.0734 5.06312 19.188 5.01484C19.3026 4.96655 19.4316 4.96575 19.5467 5.01262C19.6619 5.05948 19.7537 5.15017 19.802 5.26473L20.5302 6.99253C20.5785 7.10709 20.5793 7.23614 20.5325 7.35128C20.4856 7.46643 20.3949 7.55825 20.2804 7.60654C20.1658 7.65482 20.0367 7.65562 19.9216 7.60876C19.8064 7.56189 19.7146 7.47121 19.6663 7.35665ZM23.946 7.276C24.031 7.28853 24.1179 7.27745 24.197 7.24396C24.2709 7.21281 24.3356 7.16321 24.3848 7.09993C24.4341 7.03664 24.4663 6.96178 24.4783 6.8825L24.7455 5.10266C24.7574 5.04068 24.7566 4.97694 24.7433 4.91527C24.7299 4.85359 24.7042 4.79525 24.6678 4.74373C24.6313 4.69222 24.5848 4.6486 24.5311 4.61549C24.4774 4.58237 24.4175 4.56045 24.3551 4.55102C24.2927 4.5416 24.2291 4.54487 24.168 4.56064C24.1069 4.57642 24.0496 4.60436 23.9995 4.64281C23.9495 4.68126 23.9077 4.72942 23.8768 4.7844C23.8458 4.83938 23.8262 4.90005 23.8192 4.96277L23.552 6.74261C23.5429 6.8035 23.5458 6.8656 23.5606 6.92537C23.5755 6.98514 23.6019 7.04139 23.6385 7.09093C23.6751 7.14046 23.7211 7.1823 23.7738 7.21406C23.8266 7.24581 23.8851 7.26686 23.946 7.276ZM29.216 7.24592C29.1353 7.15257 29.0209 7.09485 28.8978 7.08529C28.7748 7.07574 28.6529 7.11512 28.5587 7.19489L27.1596 8.40136C27.0757 8.47437 27.0206 8.57481 27.0039 8.68475C26.9873 8.79468 27.0103 8.90696 27.0688 9.00151C27.1273 9.09607 27.2175 9.16675 27.3233 9.20093C27.4291 9.23512 27.5436 9.23058 27.6464 9.18813C27.6915 9.16927 27.7334 9.14345 27.7705 9.11163L29.1696 7.90516C29.2628 7.82369 29.3201 7.70863 29.3288 7.58512C29.3375 7.4616 29.2969 7.33966 29.216 7.24592ZM27.8671 12.9916C29.448 14.1822 30.5856 15.8671 31.099 17.7784C31.6124 19.6897 31.4722 21.7178 30.7007 23.5403C30.9357 25.2829 30.6495 27.0562 29.8784 28.6364C29.1072 30.2167 27.8854 31.5333 26.3672 32.4204C24.8489 33.3074 23.102 33.7252 21.3467 33.621C19.5914 33.5168 17.9061 32.8954 16.5034 31.835L9.96476 26.8818C9.57514 26.5865 9.27754 26.1864 9.10666 25.7283C8.93578 25.2703 8.89868 24.7731 8.99967 24.2947C9.10066 23.8163 9.33559 23.3766 9.67705 23.0266C10.0185 22.6767 10.4524 22.4311 10.9282 22.3185L9.52442 21.2569C9.14746 20.9713 8.85636 20.5874 8.68296 20.1473C8.50957 19.7073 8.46057 19.228 8.54133 18.762C8.62209 18.296 8.82949 17.8611 9.14084 17.5051C9.45219 17.149 9.85548 16.8855 10.3066 16.7433L10.1304 16.609C9.57697 16.2074 9.20575 15.6023 9.09841 14.9269C8.99107 14.2516 9.15642 13.5612 9.55807 13.0078C9.95973 12.4543 10.5648 12.0831 11.2402 11.9757C11.9155 11.8684 12.6059 12.0338 13.1593 12.4354C13.1389 11.9475 13.2575 11.4639 13.5012 11.0408C13.745 10.6176 14.1039 10.2724 14.5362 10.0453C14.9684 9.81823 15.4563 9.71856 15.9431 9.75793C16.4298 9.7973 16.8953 9.97409 17.2855 10.2677L20.1849 12.464C20.1646 11.9756 20.2836 11.4914 20.528 11.068C20.7724 10.6446 21.1322 10.2994 21.5653 10.0727C21.9985 9.84601 22.4872 9.74715 22.9744 9.78765C23.4616 9.82815 23.9272 10.0064 24.317 10.3015L27.8671 12.9916ZM14.7377 13.6307L15.9126 14.5204C16.1864 14.6079 16.4434 14.7412 16.6727 14.9147L19.5718 17.1073C19.5483 16.5407 19.7127 15.9823 20.0395 15.5189C20.3663 15.0555 20.8371 14.7131 21.3786 14.545L16.7192 11.0151C16.5474 10.885 16.3518 10.79 16.1433 10.7355C15.9348 10.681 15.7177 10.6681 15.5043 10.6976C15.2908 10.727 15.0853 10.7982 14.8993 10.9071C14.7134 11.016 14.5508 11.1604 14.4207 11.3321C14.1579 11.679 14.0437 12.116 14.1031 12.5471C14.1326 12.7605 14.2038 12.966 14.3126 13.152C14.4215 13.3379 14.566 13.5006 14.7377 13.6307ZM11.8687 16.7475C12.1077 16.825 12.3338 16.9376 12.5398 17.0814C12.5129 16.5128 12.6759 15.9514 13.0031 15.4856C13.3304 15.0199 13.8032 14.6762 14.3473 14.5087L12.6699 13.2445C12.4987 13.1085 12.302 13.008 12.0915 12.9491C11.8809 12.8902 11.6607 12.874 11.4438 12.9014C11.2268 12.9288 11.0176 12.9992 10.8283 13.1087C10.639 13.2181 10.4734 13.3643 10.3414 13.5386C10.2094 13.7129 10.1136 13.9118 10.0596 14.1237C10.0056 14.3356 9.99443 14.5561 10.0269 14.7724C10.0593 14.9886 10.1346 15.1962 10.2484 15.3829C10.3622 15.5696 10.5122 15.7317 10.6895 15.8596L11.8687 16.7475ZM29.7703 23.6501C29.63 22.6125 29.2854 21.613 28.7563 20.7094C28.2272 19.8058 27.5243 19.0161 26.6881 18.3859L23.1384 15.6969C22.7911 15.4349 22.354 15.3215 21.9232 15.3817C21.4923 15.4419 21.1031 15.6707 20.8409 16.0179C20.5903 16.3501 20.4752 16.7652 20.5191 17.179C20.5629 17.5929 20.7624 17.9746 21.0771 18.2469L23.2048 19.8553C23.2539 19.8925 23.2952 19.939 23.3263 19.9921C23.3574 20.0453 23.3777 20.104 23.3861 20.165C23.3946 20.226 23.3909 20.2881 23.3753 20.3476C23.3597 20.4072 23.3326 20.4631 23.2954 20.5122C23.2582 20.5613 23.2117 20.6025 23.1586 20.6336C23.1054 20.6647 23.0467 20.6851 22.9857 20.6935C22.9247 20.7019 22.8627 20.6982 22.8031 20.6826C22.7435 20.6671 22.6876 20.6399 22.6386 20.6027L16.1053 15.6625C15.7588 15.4123 15.3284 15.3071 14.9055 15.3695C14.4827 15.4318 14.1009 15.6567 13.8413 15.9962C13.5818 16.3358 13.465 16.7633 13.5158 17.1876C13.5666 17.612 13.781 17.9998 14.1134 18.2685L18.7121 21.7477C18.8112 21.8228 18.8764 21.9342 18.8934 22.0574C18.9104 22.1805 18.8777 22.3054 18.8027 22.4045C18.7276 22.5036 18.6162 22.5689 18.493 22.5858C18.3698 22.6028 18.2449 22.5702 18.1458 22.4951L12.0643 17.8935C11.8931 17.7575 11.6965 17.6571 11.4859 17.5981C11.2754 17.5392 11.0551 17.523 10.8382 17.5504C10.6213 17.5778 10.412 17.6482 10.2227 17.7577C10.0334 17.8671 9.86788 18.0133 9.73588 18.1876C9.60387 18.3619 9.50804 18.5608 9.45402 18.7727C9.4 18.9846 9.38888 19.2051 9.4213 19.4214C9.45373 19.6376 9.52906 19.8452 9.64285 20.0319C9.75665 20.2186 9.90662 20.3807 10.0839 20.5086L16.8098 25.6041C16.9089 25.6792 16.9741 25.7906 16.9911 25.9138C17.0081 26.037 16.9755 26.1619 16.9004 26.261C16.8253 26.3601 16.7139 26.4253 16.5907 26.4423C16.4675 26.4593 16.3426 26.4266 16.2435 26.3515L12.5071 23.5211C12.3354 23.391 12.1397 23.296 11.9312 23.2415C11.7228 23.1871 11.5056 23.1742 11.2922 23.2036C11.0788 23.2331 10.8732 23.3043 10.6873 23.4131C10.5014 23.522 10.3387 23.6664 10.2086 23.8382C10.0785 24.0099 9.9835 24.2056 9.92902 24.4141C9.87454 24.6225 9.86165 24.8397 9.89109 25.0531C9.92053 25.2665 9.99172 25.4721 10.1006 25.658C10.2095 25.8439 10.3539 26.0066 10.5257 26.1367L17.0648 31.0909C18.3211 32.0425 19.8313 32.6002 21.4046 32.6935C22.9778 32.7868 24.5434 32.4115 25.9033 31.6151C27.2633 30.8186 28.3565 29.6368 29.0448 28.2191C29.7332 26.8014 29.9856 25.2114 29.7703 23.6501ZM27.3008 13.739L23.7512 11.0499C23.5794 10.9198 23.3837 10.8248 23.1753 10.7703C22.9668 10.7158 22.7497 10.7029 22.5362 10.7324C22.3228 10.7618 22.1173 10.833 21.9313 10.9419C21.7454 11.0508 21.5828 11.1952 21.4526 11.367C21.3225 11.5387 21.2275 11.7344 21.1731 11.9428C21.1186 12.1513 21.1057 12.3684 21.1351 12.5819C21.1646 12.7953 21.2358 13.0009 21.3446 13.1868C21.4535 13.3727 21.5979 13.5354 21.7697 13.6655L22.9415 14.5539C23.2162 14.6424 23.4741 14.7761 23.7047 14.9495L27.2544 17.6386C28.6504 18.6908 29.7034 20.133 30.2806 21.7831C30.6063 20.2977 30.4986 18.7501 29.9704 17.3241C29.4422 15.8981 28.5156 14.6537 27.3008 13.739Z" fill="#1F1F1F" fill-opacity="0.6"/>
                    </g>
                    <defs>
                    <clipPath id="clip0_808_368">
                    <rect width="30" height="30" fill="white" transform="translate(0 12.5938) rotate(-22.8548)"/>
                    </clipPath>
                    </defs>
                    </svg>
                    <p className={darkMode ? 'svg-text-dark' : 'svg-text'}>{clap}</p>
                </div>
                    
                <CopyToClipboard text={pageLink} onCopy={()=> setCopied(true)} >
                    <div className={darkMode ? 'svg-icon-dark' : 'svg-icon'} >
                        <svg style={{cursor: 'pointer'}} stroke={darkMode && 'white'} xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 35 35" fill="none">
                        <path d="M24.1663 12.5002L17.5363 5.8335L10.833 12.5002M17.5363 5.8685V25.8335M12.4997 17.5002H9.16634C8.28229 17.5002 7.43444 17.8514 6.80932 18.4765C6.1842 19.1016 5.83301 19.9494 5.83301 20.8335V27.5002C5.83301 28.3842 6.1842 29.2321 6.80932 29.8572C7.43444 30.4823 8.28229 30.8335 9.16634 30.8335H25.833C26.7171 30.8335 27.5649 30.4823 28.19 29.8572C28.8152 29.2321 29.1663 28.3842 29.1663 27.5002V20.8335C29.1663 19.9494 28.8152 19.1016 28.19 18.4765C27.5649 17.8514 26.7171 17.5002 25.833 17.5002H22.4997" stroke="black" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        <p className={darkMode ? 'svg-text-dark' : 'svg-text'}>share</p>
                    </div>
                </CopyToClipboard>
                    
            </div>
            <div >{copied && <p className={darkMode ? "copied-notif-dark1" : "copied-notif1" }>Page URL copied to clipboard!</p>}</div>
        </div>
    )
}
export default Comment